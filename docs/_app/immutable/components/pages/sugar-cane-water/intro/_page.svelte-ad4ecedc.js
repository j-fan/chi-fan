import{S as K,i as M,s as T,k as $,l as b,m as w,h as _,n as E,b as y,g as O,t as k,A as C,d as Y,f as v,q as z,a as A,r as G,c as U,C as S,u as j,M as X,R as le,v as I,w as N,x as V,y as B,E as ae,F as ce,G as fe,H as ue,o as de,p as R,N as pe,K as ie,T as Q,U as _e,V as ge,e as L,B as Z}from"../../../../chunks/index-b80e18fb.js";import{B as he}from"../../../../chunks/Button-9f1991e7.js";import{a as me,f as ve}from"../../../../chunks/index-1f9cdb6f.js";function x(n){let e,s;return e=new he({props:{$$slots:{default:[ke]},$$scope:{ctx:n}}}),e.$on("click",n[1]),{c(){I(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){V(e,t,r),s=!0},p(t,r){const l={};r&129&&(l.$$scope={dirty:r,ctx:t}),e.$set(l)},i(t){s||(v(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function ke(n){let e=n[0].nextButton.text+"",s;return{c(){s=z(e)},l(t){s=G(t,e)},m(t,r){y(t,s,r)},p(t,r){r&1&&e!==(e=t[0].nextButton.text+"")&&j(s,e)},d(t){t&&_(s)}}}function ee(n){let e,s,t=n[0].characterName+"",r,l,a,o=n[0].bodyText+"",i,c,f,h,d,u=n[0].nextButton&&x(n);return{c(){e=$("div"),s=$("h3"),r=z(t),l=A(),a=$("p"),i=z(o),c=A(),f=$("div"),u&&u.c(),this.h()},l(g){e=b(g,"DIV",{class:!0});var p=w(e);s=b(p,"H3",{class:!0});var P=w(s);r=G(P,t),P.forEach(_),l=U(p),a=b(p,"P",{});var q=w(a);i=G(q,o),q.forEach(_),c=U(p),f=b(p,"DIV",{class:!0});var W=w(f);u&&u.l(W),W.forEach(_),p.forEach(_),this.h()},h(){E(s,"class","character-name svelte-bqys81"),E(f,"class","button-wrapper svelte-bqys81"),E(e,"class","dialog svelte-bqys81")},m(g,p){y(g,e,p),S(e,s),S(s,r),S(e,l),S(e,a),S(a,i),S(e,c),S(e,f),u&&u.m(f,null),d=!0},p(g,p){(!d||p&1)&&t!==(t=g[0].characterName+"")&&j(r,t),(!d||p&1)&&o!==(o=g[0].bodyText+"")&&j(i,o),g[0].nextButton?u?(u.p(g,p),p&1&&v(u,1)):(u=x(g),u.c(),v(u,1),u.m(f,null)):u&&(O(),k(u,1,1,()=>{u=null}),Y())},i(g){d||(v(u),h||X(()=>{h=le(e,me,{y:20,duration:400}),h.start()}),d=!0)},o(g){k(u),d=!1},d(g){g&&_(e),u&&u.d()}}}function Se(n){let e,s=n[0],t,r=ee(n);return{c(){e=$("div"),r.c(),this.h()},l(l){e=b(l,"DIV",{class:!0});var a=w(e);r.l(a),a.forEach(_),this.h()},h(){E(e,"class","float-bottom-wrapper svelte-bqys81")},m(l,a){y(l,e,a),r.m(e,null),t=!0},p(l,[a]){a&1&&T(s,s=l[0])?(O(),k(r,1,1,C),Y(),r=ee(l),r.c(),v(r,1),r.m(e,null)):r.p(l,a)},i(l){t||(v(r),t=!0)},o(l){k(r),t=!1},d(l){l&&_(e),r.d(l)}}}function $e(n,e,s){let t,{dialogs:r}=e,{isValid:l}=e,{errorStep:a}=e,{successStep:o}=e,i=0;const c=()=>{var f,h;(h=(f=t.nextButton)==null?void 0:f.action)==null||h.call(f),i<r.length-1?(s(6,i=i+1),s(0,t=r[i])):i===r.length-1&&s(6,i=i+1)};return n.$$set=f=>{"dialogs"in f&&s(2,r=f.dialogs),"isValid"in f&&s(3,l=f.isValid),"errorStep"in f&&s(4,a=f.errorStep),"successStep"in f&&s(5,o=f.successStep)},n.$$.update=()=>{if(n.$$.dirty&4&&r.length===0)throw new Error("You must provide at least 1 dialog option");n.$$.dirty&4&&s(0,t=r[0]),n.$$.dirty&124&&(i===r.length-1&&l&&s(0,t=o),i===r.length&&s(0,t=l?o:a))},[t,c,r,l,a,o,i]}class be extends K{constructor(e){super(),M(this,e,$e,Se,T,{dialogs:2,isValid:3,errorStep:4,successStep:5})}}function we(n){let e,s,t,r,l;const a=n[5].default,o=ae(a,n,n[4],null);return r=new be({props:{dialogs:n[0],isValid:n[1],errorStep:n[2],successStep:n[3]}}),{c(){e=$("div"),s=$("div"),o&&o.c(),t=A(),I(r.$$.fragment),this.h()},l(i){e=b(i,"DIV",{class:!0});var c=w(e);s=b(c,"DIV",{class:!0});var f=w(s);o&&o.l(f),f.forEach(_),t=U(c),N(r.$$.fragment,c),c.forEach(_),this.h()},h(){E(s,"class","slide-content svelte-vqkhfv"),E(e,"class","wrapper svelte-vqkhfv")},m(i,c){y(i,e,c),S(e,s),o&&o.m(s,null),S(e,t),V(r,e,null),l=!0},p(i,[c]){o&&o.p&&(!l||c&16)&&ce(o,a,i,i[4],l?ue(a,i[4],c,null):fe(i[4]),null);const f={};c&1&&(f.dialogs=i[0]),c&2&&(f.isValid=i[1]),c&4&&(f.errorStep=i[2]),c&8&&(f.successStep=i[3]),r.$set(f)},i(i){l||(v(o,i),v(r.$$.fragment,i),l=!0)},o(i){k(o,i),k(r.$$.fragment,i),l=!1},d(i){i&&_(e),o&&o.d(i),B(r)}}}function ye(n,e,s){let{$$slots:t={},$$scope:r}=e,{dialogs:l}=e,{isValid:a}=e,{errorStep:o}=e,{successStep:i}=e;return n.$$set=c=>{"dialogs"in c&&s(0,l=c.dialogs),"isValid"in c&&s(1,a=c.isValid),"errorStep"in c&&s(2,o=c.errorStep),"successStep"in c&&s(3,i=c.successStep),"$$scope"in c&&s(4,r=c.$$scope)},[l,a,o,i,r,t]}class oe extends K{constructor(e){super(),M(this,e,ye,we,T,{dialogs:0,isValid:1,errorStep:2,successStep:3})}}function Ee(n){let e,s,t,r,l,a,o,i,c,f,h,d,u,g;var p=n[0].targetComponent;function P(m){return{props:{progress:Ve}}}p&&(o=new p(P()));var q=n[0].dragComponent;function W(m){return{}}return q&&(f=new q(W())),{c(){e=$("p"),s=z("isIntersecting: "),t=z(n[7]),r=A(),l=$("div"),a=$("div"),o&&I(o.$$.fragment),i=A(),c=$("div"),f&&I(f.$$.fragment),this.h()},l(m){e=b(m,"P",{});var D=w(e);s=G(D,"isIntersecting: "),t=G(D,n[7]),D.forEach(_),r=U(m),l=b(m,"DIV",{class:!0});var H=w(l);a=b(H,"DIV",{class:!0});var F=w(a);o&&N(o.$$.fragment,F),i=U(F),c=b(F,"DIV",{class:!0,style:!0});var J=w(c);f&&N(f.$$.fragment,J),J.forEach(_),F.forEach(_),H.forEach(_),this.h()},h(){E(c,"class","follow-mouse svelte-ucousf"),R(c,"left",n[1]+"px"),R(c,"top",n[2]+"px"),X(()=>n[9].call(c)),E(a,"class","target svelte-ucousf"),E(l,"class","centered svelte-ucousf")},m(m,D){y(m,e,D),S(e,s),S(e,t),y(m,r,D),y(m,l,D),S(l,a),o&&V(o,a,null),S(a,i),S(a,c),f&&V(f,c,null),h=pe(c,n[9].bind(c)),n[10](c),n[11](a),d=!0,u||(g=ie(l,"mousemove",n[8]),u=!0)},p(m,D){if((!d||D&128)&&j(t,m[7]),p!==(p=m[0].targetComponent)){if(o){O();const H=o;k(H.$$.fragment,1,0,()=>{B(H,1)}),Y()}p?(o=new p(P()),I(o.$$.fragment),v(o.$$.fragment,1),V(o,a,i)):o=null}if(q!==(q=m[0].dragComponent)){if(f){O();const H=f;k(H.$$.fragment,1,0,()=>{B(H,1)}),Y()}q?(f=new q(W()),I(f.$$.fragment),v(f.$$.fragment,1),V(f,c,null)):f=null}(!d||D&2)&&R(c,"left",m[1]+"px"),(!d||D&4)&&R(c,"top",m[2]+"px")},i(m){d||(o&&v(o.$$.fragment,m),f&&v(f.$$.fragment,m),d=!0)},o(m){o&&k(o.$$.fragment,m),f&&k(f.$$.fragment,m),d=!1},d(m){m&&_(e),m&&_(r),m&&_(l),o&&B(o),f&&B(f),h(),n[10](null),n[11](null),u=!1,g()}}}function Ie(n){let e,s;return e=new oe({props:{dialogs:n[0].dialogs,errorStep:n[0].errorStep,successStep:n[0].successStep,isValid:!0,$$slots:{default:[Ee]},$$scope:{ctx:n}}}),{c(){I(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){V(e,t,r),s=!0},p(t,[r]){const l={};r&1&&(l.dialogs=t[0].dialogs),r&1&&(l.errorStep=t[0].errorStep),r&1&&(l.successStep=t[0].successStep),r&4351&&(l.$$scope={dirty:r,ctx:t}),e.$set(l)},i(t){s||(v(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}let Ve=.2;function Be(n,e,s){let{props:t}=e,r=0,l=0,a=0,o=0,i,c,f=!1;const h=p=>{const P=i.getBoundingClientRect();s(1,r=p.clientX-P.x-a/2),s(2,l=p.clientY-P.y-o/2)};de(()=>{const p=(q,W)=>{q.forEach((m,D)=>{s(7,f=m.isIntersecting)})},P=new IntersectionObserver(p,{root:i,rootMargin:"0px",threshold:[0,.2,.4,.6,.8,1]});return P.observe(c),()=>{P.disconnect()}});function d(){a=this.clientWidth,o=this.clientHeight,s(3,a),s(4,o)}function u(p){Q[p?"unshift":"push"](()=>{c=p,s(6,c)})}function g(p){Q[p?"unshift":"push"](()=>{i=p,s(5,i)})}return n.$$set=p=>{"props"in p&&s(0,t=p.props)},[t,r,l,a,o,i,c,f,h,d,u,g]}class Ce extends K{constructor(e){super(),M(this,e,Be,Ie,T,{props:0})}}const te=(n=0,e=100)=>{const s=e-n;let t=Math.random();return t=Math.floor(t*s),t=t+n,t};function se(n,e,s){const t=n.slice();return t[4]=e[s],t[6]=s,t}function re(n,e){let s,t,r,l,a,o;var i=e[0].itemComponent;function c(h){return{props:{picked:h[1].has(h[6])}}}i&&(t=new i(c(e)));function f(){return e[3](e[6])}return{key:n,first:null,c(){s=$("div"),t&&I(t.$$.fragment),r=A(),this.h()},l(h){s=b(h,"DIV",{class:!0,style:!0});var d=w(s);t&&N(t.$$.fragment,d),r=U(d),d.forEach(_),this.h()},h(){E(s,"class","item-wrapper svelte-10cr84b"),R(s,"left",te(0,90)+"%"),R(s,"top",te(0,100)+"%"),this.first=s},m(h,d){y(h,s,d),t&&V(t,s,null),S(s,r),l=!0,a||(o=ie(s,"click",f),a=!0)},p(h,d){e=h;const u={};if(d&3&&(u.picked=e[1].has(e[6])),i!==(i=e[0].itemComponent)){if(t){O();const g=t;k(g.$$.fragment,1,0,()=>{B(g,1)}),Y()}i?(t=new i(c(e)),I(t.$$.fragment),v(t.$$.fragment,1),V(t,s,r)):t=null}else i&&t.$set(u)},i(h){l||(t&&v(t.$$.fragment,h),l=!0)},o(h){t&&k(t.$$.fragment,h),l=!1},d(h){h&&_(s),t&&B(t),a=!1,o()}}}function De(n){let e,s,t,r=n[1].size+"",l,a,o=[],i=new Map,c,f=Array(n[0].totalItems);const h=d=>d[6];for(let d=0;d<f.length;d+=1){let u=se(n,f,d),g=h(u);i.set(g,o[d]=re(g,u))}return{c(){e=$("div"),s=$("h2"),t=z("items picked: "),l=z(r),a=A();for(let d=0;d<o.length;d+=1)o[d].c();this.h()},l(d){e=b(d,"DIV",{class:!0});var u=w(e);s=b(u,"H2",{});var g=w(s);t=G(g,"items picked: "),l=G(g,r),g.forEach(_),a=U(u);for(let p=0;p<o.length;p+=1)o[p].l(u);u.forEach(_),this.h()},h(){E(e,"class","items-container svelte-10cr84b")},m(d,u){y(d,e,u),S(e,s),S(s,t),S(s,l),S(e,a);for(let g=0;g<o.length;g+=1)o[g].m(e,null);c=!0},p(d,u){(!c||u&2)&&r!==(r=d[1].size+"")&&j(l,r),u&7&&(f=Array(d[0].totalItems),O(),o=_e(o,u,h,1,d,f,i,e,ge,re,null,se),Y())},i(d){if(!c){for(let u=0;u<f.length;u+=1)v(o[u]);c=!0}},o(d){for(let u=0;u<o.length;u+=1)k(o[u]);c=!1},d(d){d&&_(e);for(let u=0;u<o.length;u+=1)o[u].d()}}}function Te(n){let e,s;return e=new oe({props:{dialogs:n[0].dialogs,errorStep:n[0].errorStep,successStep:n[0].successStep,isValid:n[1].size>=n[0].targetCount,$$slots:{default:[De]},$$scope:{ctx:n}}}),{c(){I(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){V(e,t,r),s=!0},p(t,[r]){const l={};r&1&&(l.dialogs=t[0].dialogs),r&1&&(l.errorStep=t[0].errorStep),r&1&&(l.successStep=t[0].successStep),r&3&&(l.isValid=t[1].size>=t[0].targetCount),r&131&&(l.$$scope={dirty:r,ctx:t}),e.$set(l)},i(t){s||(v(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function Pe(n,e,s){let{props:t}=e,r=new Set;const l=o=>{r.has(o)?r.delete(o):r.add(o),s(1,r)},a=o=>{l(o)};return n.$$set=o=>{"props"in o&&s(0,t=o.props)},n.$$.update=()=>{if(n.$$.dirty&1&&t.totalItems<t.targetCount)throw new Error("The target count must be less than the total items")},[t,r,l,a]}class qe extends K{constructor(e){super(),M(this,e,Pe,Te,T,{props:0})}}function ze(n){let e,s;return{c(){e=$("div"),s=z("Unknown slide type")},l(t){e=b(t,"DIV",{});var r=w(e);s=G(r,"Unknown slide type"),r.forEach(_)},m(t,r){y(t,e,r),S(e,s)},p:C,i:C,o:C,d(t){t&&_(e)}}}function Ge(n){let e,s;return e=new Ce({props:{props:n[0]}}),{c(){I(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){V(e,t,r),s=!0},p(t,r){const l={};r&1&&(l.props=t[0]),e.$set(l)},i(t){s||(v(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function Ne(n){let e,s;return e=new qe({props:{props:n[0]}}),{c(){I(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){V(e,t,r),s=!0},p(t,r){const l={};r&1&&(l.props=t[0]),e.$set(l)},i(t){s||(v(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function Ke(n){let e,s,t,r;const l=[Ne,Ge,ze],a=[];function o(i,c){return i[0].type==="pick-items"?0:i[0].type==="drag-sides"?1:2}return e=o(n),s=a[e]=l[e](n),{c(){s.c(),t=L()},l(i){s.l(i),t=L()},m(i,c){a[e].m(i,c),y(i,t,c),r=!0},p(i,[c]){let f=e;e=o(i),e===f?a[e].p(i,c):(O(),k(a[f],1,1,()=>{a[f]=null}),Y(),s=a[e],s?s.p(i,c):(s=a[e]=l[e](i),s.c()),v(s,1),s.m(t.parentNode,t))},i(i){r||(v(s),r=!0)},o(i){k(s),r=!1},d(i){a[e].d(i),i&&_(t)}}}function Me(n,e,s){let{props:t}=e;return n.$$set=r=>{"props"in r&&s(0,t=r.props)},[t]}class He extends K{constructor(e){super(),M(this,e,Me,Ke,T,{props:0})}}function ne(n){let e,s,t,r;return s=new He({props:{props:{...n[0],successStep:n[1]}}}),{c(){e=$("div"),I(s.$$.fragment),this.h()},l(l){e=b(l,"DIV",{class:!0});var a=w(e);N(s.$$.fragment,a),a.forEach(_),this.h()},h(){E(e,"class","wrapper svelte-1h2qeuv")},m(l,a){y(l,e,a),V(s,e,null),r=!0},p(l,a){const o={};a&3&&(o.props={...l[0],successStep:l[1]}),s.$set(o)},i(l){r||(v(s.$$.fragment,l),t||X(()=>{t=le(e,ve,{duration:500}),t.start()}),r=!0)},o(l){k(s.$$.fragment,l),r=!1},d(l){l&&_(e),B(s)}}}function Re(n){let e=n[0],s,t,r=ne(n);return{c(){r.c(),s=L()},l(l){r.l(l),s=L()},m(l,a){r.m(l,a),y(l,s,a),t=!0},p(l,[a]){a&1&&T(e,e=l[0])?(O(),k(r,1,1,C),Y(),r=ne(l),r.c(),v(r,1),r.m(s.parentNode,s)):r.p(l,a)},i(l){t||(v(r),t=!0)},o(l){k(r),t=!1},d(l){l&&_(s),r.d(l)}}}function Oe(n,e,s){let t,r,{slides:l}=e,a=0;const o=()=>{a<l.length-1&&s(3,a=a+1)};return n.$$set=i=>{"slides"in i&&s(2,l=i.slides)},n.$$.update=()=>{if(n.$$.dirty&4&&l.length===0)throw new Error("You must provide at least 1 slide option");if(n.$$.dirty&12&&s(0,t=l[a]),n.$$.dirty&1&&s(1,r=t.successStep),n.$$.dirty&1){const i=t.successStep.nextButton;s(1,r={...t.successStep,nextButton:{text:(i==null?void 0:i.text)||"Ok",action:()=>{var c;(c=i==null?void 0:i.action)==null||c.call(i),o()}}})}},[t,r,l,a]}class Ye extends K{constructor(e){super(),M(this,e,Oe,Re,T,{slides:2})}}function Ae(n){let e,s;return{c(){e=$("p"),s=z("Knife"),this.h()},l(t){e=b(t,"P",{class:!0});var r=w(e);s=G(r,"Knife"),r.forEach(_),this.h()},h(){E(e,"class","wrapper svelte-unlnhx")},m(t,r){y(t,e,r),S(e,s)},p:C,i:C,o:C,d(t){t&&_(e)}}}function Ue(n){return[]}class We extends K{constructor(e){super(),M(this,e,Ue,Ae,T,{})}}function je(n){let e,s;return{c(){e=$("p"),s=z("sugar cane"),this.h()},l(t){e=b(t,"P",{class:!0,style:!0});var r=w(e);s=G(r,"sugar cane"),r.forEach(_),this.h()},h(){E(e,"class","wrapper svelte-1mzxw8p"),R(e,"filter","brightness("+(1-n[0])+")")},m(t,r){y(t,e,r),S(e,s)},p(t,[r]){r&1&&R(e,"filter","brightness("+(1-t[0])+")")},i:C,o:C,d(t){t&&_(e)}}}function Fe(n,e,s){let{progress:t=0}=e;return n.$$set=r=>{"progress"in r&&s(0,t=r.progress)},[t]}class Le extends K{constructor(e){super(),M(this,e,Fe,je,T,{progress:0})}}function Xe(n){let e,s;return{c(){e=$("p"),s=z("sugar cane"),this.h()},l(t){e=b(t,"P",{class:!0});var r=w(e);s=G(r,"sugar cane"),r.forEach(_),this.h()},h(){E(e,"class","wrapper svelte-1izuqpj"),Z(e,"picked",n[0])},m(t,r){y(t,e,r),S(e,s)},p(t,[r]){r&1&&Z(e,"picked",t[0])},i:C,o:C,d(t){t&&_(e)}}}function Je(n,e,s){let{picked:t=!1}=e;return n.$$set=r=>{"picked"in r&&s(0,t=r.picked)},[t]}class Qe extends K{constructor(e){super(),M(this,e,Je,Xe,T,{picked:0})}}function Ze(n){let e,s;return e=new Ye({props:{slides:[{type:"pick-items",dialogs:[{characterName:"Grandpa",bodyText:"First you need to pick some sugar cane",nextButton:{text:"How many do I pick?"}},{characterName:"Grandpa",bodyText:"Let's choose about 5 canes",nextButton:{text:"Ok I got it!"}}],errorStep:{characterName:"Grandpa",bodyText:"Keep going, we just need a few more!"},successStep:{characterName:"Grandpa",bodyText:"These look good. Let's bring them into the kitchen",nextButton:{text:"Sounds good"}},targetCount:5,totalItems:10,itemComponent:Qe},{type:"drag-sides",dialogs:[{characterName:"Grandpa",bodyText:"Now we need to peel the sugar cane with a knife",nextButton:{text:"Why do we need to do this?"}},{characterName:"Grandpa",bodyText:"The outside is tough and not nice to use",nextButton:{text:"Ok I got it!"}}],errorStep:{characterName:"Grandpa",bodyText:"Keep going, it is almost fully peeled"},successStep:{characterName:"Grandpa",bodyText:"The look great now, now we need to scrub it further to clean it.",nextButton:{text:"Sounds good"}},targetComponent:Le,dragComponent:We}]}}),{c(){I(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,r){V(e,t,r),s=!0},p:C,i(t){s||(v(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}class st extends K{constructor(e){super(),M(this,e,null,Ze,T,{})}}export{st as default};
