import{S as q,i as C,s as E,k as S,l as b,m as y,h,n as w,b as $,g as P,t as g,A as D,d as z,f as m,q as G,a as A,r as N,c as H,C as v,u as M,M as ee,R as te,v as V,w as T,x as I,y as B,E as re,F as ne,G as le,H as ie,T as ae,p as F,K as oe,U as ce,e as O,V as ue,B as Y}from"../../../../chunks/index-af565331.js";import{B as fe}from"../../../../chunks/Button-3f5cac8e.js";import{a as de,f as j}from"../../../../chunks/index-bfe1e67b.js";function W(n){let e,s;return e=new fe({props:{$$slots:{default:[pe]},$$scope:{ctx:n}}}),e.$on("click",n[1]),{c(){V(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){I(e,t,r),s=!0},p(t,r){const l={};r&129&&(l.$$scope={dirty:r,ctx:t}),e.$set(l)},i(t){s||(m(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function pe(n){let e=n[0].nextButton.text+"",s;return{c(){s=G(e)},l(t){s=N(t,e)},m(t,r){$(t,s,r)},p(t,r){r&1&&e!==(e=t[0].nextButton.text+"")&&M(s,e)},d(t){t&&h(s)}}}function X(n){let e,s,t=n[0].characterName+"",r,l,a,o=n[0].bodyText+"",i,c,f,_,d,u=n[0].nextButton&&W(n);return{c(){e=S("div"),s=S("h3"),r=G(t),l=A(),a=S("p"),i=G(o),c=A(),f=S("div"),u&&u.c(),this.h()},l(p){e=b(p,"DIV",{class:!0});var k=y(e);s=b(k,"H3",{class:!0});var K=y(s);r=N(K,t),K.forEach(h),l=H(k),a=b(k,"P",{});var L=y(a);i=N(L,o),L.forEach(h),c=H(k),f=b(k,"DIV",{class:!0});var R=y(f);u&&u.l(R),R.forEach(h),k.forEach(h),this.h()},h(){w(s,"class","character-name svelte-bqys81"),w(f,"class","button-wrapper svelte-bqys81"),w(e,"class","dialog svelte-bqys81")},m(p,k){$(p,e,k),v(e,s),v(s,r),v(e,l),v(e,a),v(a,i),v(e,c),v(e,f),u&&u.m(f,null),d=!0},p(p,k){(!d||k&1)&&t!==(t=p[0].characterName+"")&&M(r,t),(!d||k&1)&&o!==(o=p[0].bodyText+"")&&M(i,o),p[0].nextButton?u?(u.p(p,k),k&1&&m(u,1)):(u=W(p),u.c(),m(u,1),u.m(f,null)):u&&(P(),g(u,1,1,()=>{u=null}),z())},i(p){d||(m(u),_||ee(()=>{_=te(e,de,{y:20,duration:400}),_.start()}),d=!0)},o(p){g(u),d=!1},d(p){p&&h(e),u&&u.d()}}}function _e(n){let e,s=n[0],t,r=X(n);return{c(){e=S("div"),r.c(),this.h()},l(l){e=b(l,"DIV",{class:!0});var a=y(e);r.l(a),a.forEach(h),this.h()},h(){w(e,"class","float-bottom-wrapper svelte-bqys81")},m(l,a){$(l,e,a),r.m(e,null),t=!0},p(l,[a]){a&1&&E(s,s=l[0])?(P(),g(r,1,1,D),z(),r=X(l),r.c(),m(r,1),r.m(e,null)):r.p(l,a)},i(l){t||(m(r),t=!0)},o(l){g(r),t=!1},d(l){l&&h(e),r.d(l)}}}function he(n,e,s){let t,{dialogs:r}=e,{isValid:l}=e,{errorStep:a}=e,{successStep:o}=e,i=0;const c=()=>{var f,_;(_=(f=t.nextButton)==null?void 0:f.action)==null||_.call(f),i<r.length-1?(s(6,i=i+1),s(0,t=r[i])):i===r.length-1&&s(6,i=i+1)};return n.$$set=f=>{"dialogs"in f&&s(2,r=f.dialogs),"isValid"in f&&s(3,l=f.isValid),"errorStep"in f&&s(4,a=f.errorStep),"successStep"in f&&s(5,o=f.successStep)},n.$$.update=()=>{if(n.$$.dirty&4&&r.length===0)throw new Error("You must provide at least 1 dialog option");n.$$.dirty&4&&s(0,t=r[0]),n.$$.dirty&124&&(i===r.length-1&&l&&s(0,t=o),i===r.length&&s(0,t=l?o:a))},[t,c,r,l,a,o,i]}class me extends q{constructor(e){super(),C(this,e,he,_e,E,{dialogs:2,isValid:3,errorStep:4,successStep:5})}}function ge(n){let e,s,t,r,l;const a=n[5].default,o=re(a,n,n[4],null);return r=new me({props:{dialogs:n[0],isValid:n[1],errorStep:n[2],successStep:n[3]}}),{c(){e=S("div"),s=S("div"),o&&o.c(),t=A(),V(r.$$.fragment),this.h()},l(i){e=b(i,"DIV",{class:!0});var c=y(e);s=b(c,"DIV",{class:!0});var f=y(s);o&&o.l(f),f.forEach(h),t=H(c),T(r.$$.fragment,c),c.forEach(h),this.h()},h(){w(s,"class","slide-content svelte-vqkhfv"),w(e,"class","wrapper svelte-vqkhfv")},m(i,c){$(i,e,c),v(e,s),o&&o.m(s,null),v(e,t),I(r,e,null),l=!0},p(i,[c]){o&&o.p&&(!l||c&16)&&ne(o,a,i,i[4],l?ie(a,i[4],c,null):le(i[4]),null);const f={};c&1&&(f.dialogs=i[0]),c&2&&(f.isValid=i[1]),c&4&&(f.errorStep=i[2]),c&8&&(f.successStep=i[3]),r.$set(f)},i(i){l||(m(o,i),m(r.$$.fragment,i),l=!0)},o(i){g(o,i),g(r.$$.fragment,i),l=!1},d(i){i&&h(e),o&&o.d(i),B(r)}}}function ke(n,e,s){let{$$slots:t={},$$scope:r}=e,{dialogs:l}=e,{isValid:a}=e,{errorStep:o}=e,{successStep:i}=e;return n.$$set=c=>{"dialogs"in c&&s(0,l=c.dialogs),"isValid"in c&&s(1,a=c.isValid),"errorStep"in c&&s(2,o=c.errorStep),"successStep"in c&&s(3,i=c.successStep),"$$scope"in c&&s(4,r=c.$$scope)},[l,a,o,i,r,t]}class se extends q{constructor(e){super(),C(this,e,ke,ge,E,{dialogs:0,isValid:1,errorStep:2,successStep:3})}}function ve(n){let e,s;return e=new se({props:{dialogs:n[0].dialogs,errorStep:n[0].errorStep,successStep:n[0].successStep,isValid:!0}}),{c(){V(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){I(e,t,r),s=!0},p(t,[r]){const l={};r&1&&(l.dialogs=t[0].dialogs),r&1&&(l.errorStep=t[0].errorStep),r&1&&(l.successStep=t[0].successStep),e.$set(l)},i(t){s||(m(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function Se(n,e,s){let{props:t}=e;return n.$$set=r=>{"props"in r&&s(0,t=r.props)},[t]}class be extends q{constructor(e){super(),C(this,e,Se,ve,E,{props:0})}}const J=(n=0,e=100)=>{const s=e-n;let t=Math.random();return t=Math.floor(t*s),t=t+n,t};function Q(n,e,s){const t=n.slice();return t[4]=e[s],t[6]=s,t}function Z(n,e){let s,t,r,l,a,o;var i=e[0].itemComponent;function c(_){return{props:{picked:_[1].has(_[6])}}}i&&(t=new i(c(e)));function f(){return e[3](e[6])}return{key:n,first:null,c(){s=S("div"),t&&V(t.$$.fragment),r=A(),this.h()},l(_){s=b(_,"DIV",{class:!0,style:!0});var d=y(s);t&&T(t.$$.fragment,d),r=H(d),d.forEach(h),this.h()},h(){w(s,"class","item-wrapper svelte-qhv4q"),F(s,"left",J(0,90)+"%"),F(s,"top",J(0,100)+"%"),this.first=s},m(_,d){$(_,s,d),t&&I(t,s,null),v(s,r),l=!0,a||(o=oe(s,"click",f),a=!0)},p(_,d){e=_;const u={};if(d&3&&(u.picked=e[1].has(e[6])),i!==(i=e[0].itemComponent)){if(t){P();const p=t;g(p.$$.fragment,1,0,()=>{B(p,1)}),z()}i?(t=new i(c(e)),V(t.$$.fragment),m(t.$$.fragment,1),I(t,s,r)):t=null}else i&&t.$set(u)},i(_){l||(t&&m(t.$$.fragment,_),l=!0)},o(_){t&&g(t.$$.fragment,_),l=!1},d(_){_&&h(s),t&&B(t),a=!1,o()}}}function ye(n){let e,s,t,r=n[1].size+"",l,a,o=[],i=new Map,c,f=Array(n[0].totalItems);const _=d=>d[6];for(let d=0;d<f.length;d+=1){let u=Q(n,f,d),p=_(u);i.set(p,o[d]=Z(p,u))}return{c(){e=S("div"),s=S("h2"),t=G("items picked: "),l=G(r),a=A();for(let d=0;d<o.length;d+=1)o[d].c();this.h()},l(d){e=b(d,"DIV",{class:!0});var u=y(e);s=b(u,"H2",{});var p=y(s);t=N(p,"items picked: "),l=N(p,r),p.forEach(h),a=H(u);for(let k=0;k<o.length;k+=1)o[k].l(u);u.forEach(h),this.h()},h(){w(e,"class","items-container svelte-qhv4q")},m(d,u){$(d,e,u),v(e,s),v(s,t),v(s,l),v(e,a);for(let p=0;p<o.length;p+=1)o[p].m(e,null);c=!0},p(d,u){(!c||u&2)&&r!==(r=d[1].size+"")&&M(l,r),u&7&&(f=Array(d[0].totalItems),P(),o=ae(o,u,_,1,d,f,i,e,ce,Z,null,Q),z())},i(d){if(!c){for(let u=0;u<f.length;u+=1)m(o[u]);c=!0}},o(d){for(let u=0;u<o.length;u+=1)g(o[u]);c=!1},d(d){d&&h(e);for(let u=0;u<o.length;u+=1)o[u].d()}}}function $e(n){let e,s;return e=new se({props:{dialogs:n[0].dialogs,errorStep:n[0].errorStep,successStep:n[0].successStep,isValid:n[1].size>=n[0].targetCount,$$slots:{default:[ye]},$$scope:{ctx:n}}}),{c(){V(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){I(e,t,r),s=!0},p(t,[r]){const l={};r&1&&(l.dialogs=t[0].dialogs),r&1&&(l.errorStep=t[0].errorStep),r&1&&(l.successStep=t[0].successStep),r&3&&(l.isValid=t[1].size>=t[0].targetCount),r&131&&(l.$$scope={dirty:r,ctx:t}),e.$set(l)},i(t){s||(m(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function we(n,e,s){let{props:t}=e,r=new Set;const l=o=>{r.has(o)?r.delete(o):r.add(o),s(1,r)},a=o=>{l(o)};return n.$$set=o=>{"props"in o&&s(0,t=o.props)},n.$$.update=()=>{if(n.$$.dirty&1&&t.totalItems<t.targetCount)throw new Error("The target count must be less than the total items")},[t,r,l,a]}class Ve extends q{constructor(e){super(),C(this,e,we,$e,E,{props:0})}}function Ie(n){let e,s;return{c(){e=S("div"),s=G("Unknown slide type")},l(t){e=b(t,"DIV",{});var r=y(e);s=N(r,"Unknown slide type"),r.forEach(h)},m(t,r){$(t,e,r),v(e,s)},p:D,i:D,o:D,d(t){t&&h(e)}}}function Be(n){let e,s;return e=new be({props:{props:n[0]}}),{c(){V(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){I(e,t,r),s=!0},p(t,r){const l={};r&1&&(l.props=t[0]),e.$set(l)},i(t){s||(m(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function Ee(n){let e,s;return e=new Ve({props:{props:n[0]}}),{c(){V(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){I(e,t,r),s=!0},p(t,r){const l={};r&1&&(l.props=t[0]),e.$set(l)},i(t){s||(m(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function Te(n){let e,s,t,r;const l=[Ee,Be,Ie],a=[];function o(i,c){return i[0].type==="pick-items"?0:i[0].type==="drag-sides"?1:2}return e=o(n),s=a[e]=l[e](n),{c(){s.c(),t=O()},l(i){s.l(i),t=O()},m(i,c){a[e].m(i,c),$(i,t,c),r=!0},p(i,[c]){let f=e;e=o(i),e===f?a[e].p(i,c):(P(),g(a[f],1,1,()=>{a[f]=null}),z(),s=a[e],s?s.p(i,c):(s=a[e]=l[e](i),s.c()),m(s,1),s.m(t.parentNode,t))},i(i){r||(m(s),r=!0)},o(i){g(s),r=!1},d(i){a[e].d(i),i&&h(t)}}}function De(n,e,s){let{props:t}=e;return n.$$set=r=>{"props"in r&&s(0,t=r.props)},[t]}class qe extends q{constructor(e){super(),C(this,e,De,Te,E,{props:0})}}function x(n){let e,s,t,r,l;return s=new qe({props:{props:{...n[0],successStep:n[1]}}}),{c(){e=S("div"),V(s.$$.fragment),this.h()},l(a){e=b(a,"DIV",{class:!0});var o=y(e);T(s.$$.fragment,o),o.forEach(h),this.h()},h(){w(e,"class","wrapper svelte-1h2qeuv")},m(a,o){$(a,e,o),I(s,e,null),l=!0},p(a,o){n=a;const i={};o&3&&(i.props={...n[0],successStep:n[1]}),s.$set(i)},i(a){l||(m(s.$$.fragment,a),ee(()=>{r&&r.end(1),t=te(e,j,{duration:U,delay:U}),t.start()}),l=!0)},o(a){g(s.$$.fragment,a),t&&t.invalidate(),r=ue(e,j,{duration:U}),l=!1},d(a){a&&h(e),B(s),a&&r&&r.end()}}}function Ce(n){let e=n[0],s,t,r=x(n);return{c(){r.c(),s=O()},l(l){r.l(l),s=O()},m(l,a){r.m(l,a),$(l,s,a),t=!0},p(l,[a]){a&1&&E(e,e=l[0])?(P(),g(r,1,1,D),z(),r=x(l),r.c(),m(r,1),r.m(s.parentNode,s)):r.p(l,a)},i(l){t||(m(r),t=!0)},o(l){g(r),t=!1},d(l){l&&h(s),r.d(l)}}}const U=500;function Ge(n,e,s){let t,r,{slides:l}=e,a=0;const o=()=>{a<l.length-1&&s(3,a=a+1)};return n.$$set=i=>{"slides"in i&&s(2,l=i.slides)},n.$$.update=()=>{if(n.$$.dirty&4&&l.length===0)throw new Error("You must provide at least 1 slide option");if(n.$$.dirty&12&&s(0,t=l[a]),n.$$.dirty&1&&s(1,r=t.successStep),n.$$.dirty&1){const i=t.successStep.nextButton;s(1,r={...t.successStep,nextButton:{text:(i==null?void 0:i.text)||"Ok",action:()=>{var c;(c=i==null?void 0:i.action)==null||c.call(i),o()}}})}},[t,r,l,a]}class Ne extends q{constructor(e){super(),C(this,e,Ge,Ce,E,{slides:2})}}function Pe(n){let e,s;return{c(){e=S("p"),s=G("sugar cane"),this.h()},l(t){e=b(t,"P",{class:!0});var r=y(e);s=N(r,"sugar cane"),r.forEach(h),this.h()},h(){w(e,"class","wrapper svelte-1l6ndng"),Y(e,"picked",n[0])},m(t,r){$(t,e,r),v(e,s)},p(t,[r]){r&1&&Y(e,"picked",t[0])},i:D,o:D,d(t){t&&h(e)}}}function ze(n,e,s){let{picked:t=!1}=e;return n.$$set=r=>{"picked"in r&&s(0,t=r.picked)},[t]}class Ae extends q{constructor(e){super(),C(this,e,ze,Pe,E,{picked:0})}}function He(n){let e,s;return e=new Ne({props:{slides:[{type:"pick-items",dialogs:[{characterName:"Grandpa",bodyText:"First you need to pick some sugar cane",nextButton:{text:"How many do I pick?"}},{characterName:"Grandpa",bodyText:"Let's choose about 5 canes",nextButton:{text:"Ok I got it!"}}],errorStep:{characterName:"Grandpa",bodyText:"Keep going, we just need a few more!"},successStep:{characterName:"Grandpa",bodyText:"These look good. Let's bring them into the kitchen",nextButton:{text:"Sounds good"}},targetCount:5,totalItems:10,itemComponent:Ae},{type:"drag-sides",dialogs:[{characterName:"Grandpa",bodyText:"Now we need to peel the sugar cane with a knife",nextButton:{text:"Why do we need to do this?"}},{characterName:"Grandpa",bodyText:"The outside is tough and not nice to use",nextButton:{text:"Ok I got it!"}}],errorStep:{characterName:"Grandpa",bodyText:"Keep going, it is almost fully peeled"},successStep:{characterName:"Grandpa",bodyText:"The look great now, now we need to scrub it further to clean it.",nextButton:{text:"Sounds good"}}}]}}),{c(){V(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){I(e,t,r),s=!0},p:D,i(t){s||(m(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}class Ke extends q{constructor(e){super(),C(this,e,null,He,E,{})}}export{Ke as default};
