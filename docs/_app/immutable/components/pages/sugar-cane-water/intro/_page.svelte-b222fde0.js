import{S as G,i as N,s as T,k as S,l as b,m as y,h as _,n as $,b as w,g as z,t as g,A as V,d as H,f as m,z as re,q as D,a as A,r as C,c as M,C as v,u as U,M as ee,R as te,v as I,w as q,x as E,y as B,E as ne,F as le,G as ae,H as ie,T as oe,p as Y,K as ce,U as ue,e as K,V as fe,W as de,X as pe,Y as _e,B as j}from"../../../../chunks/index-7910800e.js";import{B as he}from"../../../../chunks/Button-ea0536e9.js";import{a as me,f as F}from"../../../../chunks/index-514f8f06.js";function W(a){let e,s;return e=new he({props:{$$slots:{default:[ge]},$$scope:{ctx:a}}}),e.$on("click",a[1]),{c(){I(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,r){E(e,t,r),s=!0},p(t,r){const n={};r&129&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){s||(m(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function ge(a){let e=a[0].nextButton.text+"",s;return{c(){s=D(e)},l(t){s=C(t,e)},m(t,r){w(t,s,r)},p(t,r){r&1&&e!==(e=t[0].nextButton.text+"")&&U(s,e)},d(t){t&&_(s)}}}function X(a){let e,s,t=a[0].characterName+"",r,n,i,o=a[0].bodyText+"",l,c,f,p,k,u=a[0].nextButton&&W(a);return{c(){e=S("div"),s=S("h3"),r=D(t),n=A(),i=S("p"),l=D(o),c=A(),f=S("div"),u&&u.c(),this.h()},l(d){e=b(d,"DIV",{class:!0});var h=y(e);s=b(h,"H3",{class:!0});var O=y(s);r=C(O,t),O.forEach(_),n=M(h),i=b(h,"P",{});var P=y(i);l=C(P,o),P.forEach(_),c=M(h),f=b(h,"DIV",{class:!0});var R=y(f);u&&u.l(R),R.forEach(_),h.forEach(_),this.h()},h(){$(s,"class","character-name svelte-bqys81"),$(f,"class","button-wrapper svelte-bqys81"),$(e,"class","dialog svelte-bqys81")},m(d,h){w(d,e,h),v(e,s),v(s,r),v(e,n),v(e,i),v(i,l),v(e,c),v(e,f),u&&u.m(f,null),k=!0},p(d,h){(!k||h&1)&&t!==(t=d[0].characterName+"")&&U(r,t),(!k||h&1)&&o!==(o=d[0].bodyText+"")&&U(l,o),d[0].nextButton?u?(u.p(d,h),h&1&&m(u,1)):(u=W(d),u.c(),m(u,1),u.m(f,null)):u&&(z(),g(u,1,1,()=>{u=null}),H())},i(d){k||(m(u),p||ee(()=>{p=te(e,me,{y:20,duration:400}),p.start()}),k=!0)},o(d){g(u),k=!1},d(d){d&&_(e),u&&u.d()}}}function ve(a){let e,s=a[0],t,r=X(a);return{c(){e=S("div"),r.c(),this.h()},l(n){e=b(n,"DIV",{class:!0});var i=y(e);r.l(i),i.forEach(_),this.h()},h(){$(e,"class","float-bottom-wrapper svelte-bqys81")},m(n,i){w(n,e,i),r.m(e,null),t=!0},p(n,[i]){i&1&&T(s,s=n[0])?(z(),g(r,1,1,V),H(),r=X(n),r.c(),m(r,1),r.m(e,null)):r.p(n,i)},i(n){t||(m(r),t=!0)},o(n){g(r),t=!1},d(n){n&&_(e),r.d(n)}}}function ke(a,e,s){let t,{dialogs:r}=e,{isValid:n}=e,{errorStep:i}=e,{successStep:o}=e,l=0;const c=()=>{var f,p;(p=(f=t.nextButton)==null?void 0:f.action)==null||p.call(f),l<r.length-1?(s(6,l=l+1),s(0,t=r[l])):l===r.length-1&&s(6,l=l+1)};return a.$$set=f=>{"dialogs"in f&&s(2,r=f.dialogs),"isValid"in f&&s(3,n=f.isValid),"errorStep"in f&&s(4,i=f.errorStep),"successStep"in f&&s(5,o=f.successStep)},a.$$.update=()=>{if(a.$$.dirty&4&&r.length===0)throw new Error("You must provide at least 1 dialog option");a.$$.dirty&4&&s(0,t=r[0]),a.$$.dirty&124&&l===r.length&&(s(0,t=n?o:i),re())},[t,c,r,n,i,o,l]}class Se extends G{constructor(e){super(),N(this,e,ke,ve,T,{dialogs:2,isValid:3,errorStep:4,successStep:5})}}function be(a){let e,s,t,r,n;const i=a[5].default,o=ne(i,a,a[4],null);return r=new Se({props:{dialogs:a[0],isValid:a[1],errorStep:a[2],successStep:a[3]}}),{c(){e=S("div"),s=S("div"),o&&o.c(),t=A(),I(r.$$.fragment),this.h()},l(l){e=b(l,"DIV",{class:!0});var c=y(e);s=b(c,"DIV",{class:!0});var f=y(s);o&&o.l(f),f.forEach(_),t=M(c),q(r.$$.fragment,c),c.forEach(_),this.h()},h(){$(s,"class","slide-content svelte-vqkhfv"),$(e,"class","wrapper svelte-vqkhfv")},m(l,c){w(l,e,c),v(e,s),o&&o.m(s,null),v(e,t),E(r,e,null),n=!0},p(l,[c]){o&&o.p&&(!n||c&16)&&le(o,i,l,l[4],n?ie(i,l[4],c,null):ae(l[4]),null);const f={};c&1&&(f.dialogs=l[0]),c&2&&(f.isValid=l[1]),c&4&&(f.errorStep=l[2]),c&8&&(f.successStep=l[3]),r.$set(f)},i(l){n||(m(o,l),m(r.$$.fragment,l),n=!0)},o(l){g(o,l),g(r.$$.fragment,l),n=!1},d(l){l&&_(e),o&&o.d(l),B(r)}}}function ye(a,e,s){let{$$slots:t={},$$scope:r}=e,{dialogs:n}=e,{isValid:i}=e,{errorStep:o}=e,{successStep:l}=e;return a.$$set=c=>{"dialogs"in c&&s(0,n=c.dialogs),"isValid"in c&&s(1,i=c.isValid),"errorStep"in c&&s(2,o=c.errorStep),"successStep"in c&&s(3,l=c.successStep),"$$scope"in c&&s(4,r=c.$$scope)},[n,i,o,l,r,t]}class se extends G{constructor(e){super(),N(this,e,ye,be,T,{dialogs:0,isValid:1,errorStep:2,successStep:3})}}const J=(a=0,e=100)=>{const s=e-a;let t=Math.random();return t=Math.floor(t*s),t=t+a,t};function Q(a,e,s){const t=a.slice();return t[4]=e[s],t[6]=s,t}function Z(a,e){let s,t,r,n,i,o;var l=e[0].itemComponent;function c(p){return{props:{picked:p[1].has(p[6])}}}l&&(t=new l(c(e)));function f(){return e[3](e[6])}return{key:a,first:null,c(){s=S("div"),t&&I(t.$$.fragment),r=A(),this.h()},l(p){s=b(p,"DIV",{class:!0,style:!0});var k=y(s);t&&q(t.$$.fragment,k),r=M(k),k.forEach(_),this.h()},h(){$(s,"class","item-wrapper svelte-1sato7a"),Y(s,"left",J(0,100)+"%"),Y(s,"top",J(0,100)+"%"),this.first=s},m(p,k){w(p,s,k),t&&E(t,s,null),v(s,r),n=!0,i||(o=ce(s,"click",f),i=!0)},p(p,k){e=p;const u={};if(k&3&&(u.picked=e[1].has(e[6])),l!==(l=e[0].itemComponent)){if(t){z();const d=t;g(d.$$.fragment,1,0,()=>{B(d,1)}),H()}l?(t=new l(c(e)),I(t.$$.fragment),m(t.$$.fragment,1),E(t,s,r)):t=null}else l&&t.$set(u)},i(p){n||(t&&m(t.$$.fragment,p),n=!0)},o(p){t&&g(t.$$.fragment,p),n=!1},d(p){p&&_(s),t&&B(t),i=!1,o()}}}function we(a){let e,s,t,r,n=a[1].size+"",i,o,l=[],c=new Map,f,p=Array(a[0].totalItems);const k=u=>u[6];for(let u=0;u<p.length;u+=1){let d=Q(a,p,u),h=k(d);c.set(h,l[u]=Z(h,d))}return{c(){e=S("div"),s=S("div"),t=S("h2"),r=D("items picked: "),i=D(n),o=A();for(let u=0;u<l.length;u+=1)l[u].c();this.h()},l(u){e=b(u,"DIV",{class:!0});var d=y(e);s=b(d,"DIV",{class:!0});var h=y(s);t=b(h,"H2",{});var O=y(t);r=C(O,"items picked: "),i=C(O,n),O.forEach(_),o=M(h);for(let P=0;P<l.length;P+=1)l[P].l(h);h.forEach(_),d.forEach(_),this.h()},h(){$(s,"class","items-container svelte-1sato7a"),$(e,"class","slide-content svelte-1sato7a")},m(u,d){w(u,e,d),v(e,s),v(s,t),v(t,r),v(t,i),v(s,o);for(let h=0;h<l.length;h+=1)l[h].m(s,null);f=!0},p(u,d){(!f||d&2)&&n!==(n=u[1].size+"")&&U(i,n),d&7&&(p=Array(u[0].totalItems),z(),l=oe(l,d,k,1,u,p,c,s,ue,Z,null,Q),H())},i(u){if(!f){for(let d=0;d<p.length;d+=1)m(l[d]);f=!0}},o(u){for(let d=0;d<l.length;d+=1)g(l[d]);f=!1},d(u){u&&_(e);for(let d=0;d<l.length;d+=1)l[d].d()}}}function $e(a){let e,s;return e=new se({props:{dialogs:a[0].dialogs,errorStep:a[0].errorStep,successStep:a[0].successStep,isValid:a[1].size>=a[0].targetCount,$$slots:{default:[we]},$$scope:{ctx:a}}}),{c(){I(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,r){E(e,t,r),s=!0},p(t,[r]){const n={};r&1&&(n.dialogs=t[0].dialogs),r&1&&(n.errorStep=t[0].errorStep),r&1&&(n.successStep=t[0].successStep),r&3&&(n.isValid=t[1].size>=t[0].targetCount),r&131&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){s||(m(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function Ve(a,e,s){let{props:t}=e,r=new Set;const n=o=>{r.has(o)?r.delete(o):r.add(o),s(1,r)},i=o=>{n(o)};return a.$$set=o=>{"props"in o&&s(0,t=o.props)},a.$$.update=()=>{if(a.$$.dirty&1&&t.totalItems<t.targetCount)throw new Error("The target count must be less than the total items")},[t,r,n,i]}class Ie extends G{constructor(e){super(),N(this,e,Ve,$e,T,{props:0})}}function Ee(a){let e,s;return{c(){e=S("div"),s=D("Unknown slide type")},l(t){e=b(t,"DIV",{});var r=y(e);s=C(r,"Unknown slide type"),r.forEach(_)},m(t,r){w(t,e,r),v(e,s)},p:V,i:V,o:V,d(t){t&&_(e)}}}function Be(a){let e,s;const t=[a[0],{isValid:!0}];let r={$$slots:{default:[De]},$$scope:{ctx:a}};for(let n=0;n<t.length;n+=1)r=fe(r,t[n]);return e=new se({props:r}),{c(){I(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,i){E(e,n,i),s=!0},p(n,i){const o=i&1?de(t,[pe(n[0]),t[1]]):{};i&2&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){s||(m(e.$$.fragment,n),s=!0)},o(n){g(e.$$.fragment,n),s=!1},d(n){B(e,n)}}}function Te(a){let e,s;return e=new Ie({props:{props:a[0]}}),{c(){I(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,r){E(e,t,r),s=!0},p(t,r){const n={};r&1&&(n.props=t[0]),e.$set(n)},i(t){s||(m(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function De(a){let e,s;return{c(){e=S("h2"),s=D('TODO: implement "drag sides" slide type')},l(t){e=b(t,"H2",{});var r=y(e);s=C(r,'TODO: implement "drag sides" slide type'),r.forEach(_)},m(t,r){w(t,e,r),v(e,s)},p:V,d(t){t&&_(e)}}}function Ce(a){let e,s,t,r;const n=[Te,Be,Ee],i=[];function o(l,c){return l[0].type==="pick-items"?0:l[0].type==="drag-sides"?1:2}return e=o(a),s=i[e]=n[e](a),{c(){s.c(),t=K()},l(l){s.l(l),t=K()},m(l,c){i[e].m(l,c),w(l,t,c),r=!0},p(l,[c]){let f=e;e=o(l),e===f?i[e].p(l,c):(z(),g(i[f],1,1,()=>{i[f]=null}),H(),s=i[e],s?s.p(l,c):(s=i[e]=n[e](l),s.c()),m(s,1),s.m(t.parentNode,t))},i(l){r||(m(s),r=!0)},o(l){g(s),r=!1},d(l){i[e].d(l),l&&_(t)}}}function qe(a,e,s){let{props:t}=e;return a.$$set=r=>{"props"in r&&s(0,t=r.props)},[t]}class Ge extends G{constructor(e){super(),N(this,e,qe,Ce,T,{props:0})}}function x(a){let e,s,t,r,n;return s=new Ge({props:{props:{...a[0],successStep:a[1]}}}),{c(){e=S("div"),I(s.$$.fragment),this.h()},l(i){e=b(i,"DIV",{class:!0});var o=y(e);q(s.$$.fragment,o),o.forEach(_),this.h()},h(){$(e,"class","wrapper svelte-1h2qeuv")},m(i,o){w(i,e,o),E(s,e,null),n=!0},p(i,o){a=i;const l={};o&3&&(l.props={...a[0],successStep:a[1]}),s.$set(l)},i(i){n||(m(s.$$.fragment,i),ee(()=>{r&&r.end(1),t=te(e,F,{duration:L,delay:L}),t.start()}),n=!0)},o(i){g(s.$$.fragment,i),t&&t.invalidate(),r=_e(e,F,{duration:L}),n=!1},d(i){i&&_(e),B(s),i&&r&&r.end()}}}function Ne(a){let e=a[0],s,t,r=x(a);return{c(){r.c(),s=K()},l(n){r.l(n),s=K()},m(n,i){r.m(n,i),w(n,s,i),t=!0},p(n,[i]){i&1&&T(e,e=n[0])?(z(),g(r,1,1,V),H(),r=x(n),r.c(),m(r,1),r.m(s.parentNode,s)):r.p(n,i)},i(n){t||(m(r),t=!0)},o(n){g(r),t=!1},d(n){n&&_(s),r.d(n)}}}const L=500;function Oe(a,e,s){let t,r,{slides:n}=e,i=0;const o=()=>{i<n.length-1&&s(3,i=i+1)};return a.$$set=l=>{"slides"in l&&s(2,n=l.slides)},a.$$.update=()=>{if(a.$$.dirty&4&&n.length===0)throw new Error("You must provide at least 1 slide option");if(a.$$.dirty&12&&s(0,t=n[i]),a.$$.dirty&1&&s(1,r=t.successStep),a.$$.dirty&1){const l=t.successStep.nextButton;s(1,r={...t.successStep,nextButton:{text:(l==null?void 0:l.text)||"Ok",action:()=>{var c;(c=l==null?void 0:l.action)==null||c.call(l),o()}}})}},[t,r,n,i]}class Pe extends G{constructor(e){super(),N(this,e,Oe,Ne,T,{slides:2})}}function ze(a){let e,s;return{c(){e=S("p"),s=D("sugar cane"),this.h()},l(t){e=b(t,"P",{class:!0});var r=y(e);s=C(r,"sugar cane"),r.forEach(_),this.h()},h(){$(e,"class","wrapper svelte-11t8tm5"),j(e,"picked",a[0])},m(t,r){w(t,e,r),v(e,s)},p(t,[r]){r&1&&j(e,"picked",t[0])},i:V,o:V,d(t){t&&_(e)}}}function He(a,e,s){let{picked:t=!1}=e;return a.$$set=r=>{"picked"in r&&s(0,t=r.picked)},[t]}class Ae extends G{constructor(e){super(),N(this,e,He,ze,T,{picked:0})}}function Me(a){let e,s;return e=new Pe({props:{slides:[{type:"pick-items",dialogs:[{characterName:"Grandpa",bodyText:"First you need to pick some sugar cane",nextButton:{text:"How many do I pick?"}},{characterName:"Grandpa",bodyText:"Let's choose about 5 canes",nextButton:{text:"Ok I got it!"}}],errorStep:{characterName:"Grandpa",bodyText:"Keep going, we just need a few more!"},successStep:{characterName:"Grandpa",bodyText:"These look good. Let's bring them into the kitchen",nextButton:{text:"Sounds good"}},targetCount:5,totalItems:12,itemComponent:Ae},{type:"drag-sides",dialogs:[{characterName:"Grandpa",bodyText:"Now we need to peel the sugar cane with a knife",nextButton:{text:"Why do we need to do this?"}},{characterName:"Grandpa",bodyText:"The outside is tough and not nice to use",nextButton:{text:"Ok I got it!"}}],errorStep:{characterName:"Grandpa",bodyText:"Keep going, it is almost fully peeled"},successStep:{characterName:"Grandpa",bodyText:"The look great now, now we need to scrub it further to clean it.",nextButton:{text:"Sounds good"}}}]}}),{c(){I(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,r){E(e,t,r),s=!0},p:V,i(t){s||(m(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}class Re extends G{constructor(e){super(),N(this,e,null,Me,T,{})}}export{Re as default};
