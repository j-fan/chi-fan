import{S as G,i as N,s as T,k as S,l as b,m as y,h as _,n as $,b as w,g as O,t as g,A as V,d as P,f as m,z as re,q as D,a as z,r as q,c as H,C as v,u as A,M as ee,R as te,v as I,w as C,x as B,y as E,E as ne,F as le,G as ae,H as ie,T as oe,p as Y,K as ce,U as ue,e as M,V as fe,W as de,X as pe,Y as _e,B as j}from"../../../../chunks/index-7910800e.js";import{B as he}from"../../../../chunks/Button-ea0536e9.js";import{a as me,f as F}from"../../../../chunks/index-514f8f06.js";function W(l){let e,s;return e=new he({props:{$$slots:{default:[ge]},$$scope:{ctx:l}}}),e.$on("click",l[1]),{c(){I(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,r){B(e,t,r),s=!0},p(t,r){const n={};r&129&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){s||(m(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){E(e,t)}}}function ge(l){let e=l[0].nextButton.text+"",s;return{c(){s=D(e)},l(t){s=q(t,e)},m(t,r){w(t,s,r)},p(t,r){r&1&&e!==(e=t[0].nextButton.text+"")&&A(s,e)},d(t){t&&_(s)}}}function X(l){let e,s,t=l[0].characterName+"",r,n,i,o=l[0].bodyText+"",a,c,f,h,d,u=l[0].nextButton&&W(l);return{c(){e=S("div"),s=S("h3"),r=D(t),n=z(),i=S("p"),a=D(o),c=z(),f=S("div"),u&&u.c(),this.h()},l(p){e=b(p,"DIV",{class:!0});var k=y(e);s=b(k,"H3",{class:!0});var K=y(s);r=q(K,t),K.forEach(_),n=H(k),i=b(k,"P",{});var L=y(i);a=q(L,o),L.forEach(_),c=H(k),f=b(k,"DIV",{class:!0});var R=y(f);u&&u.l(R),R.forEach(_),k.forEach(_),this.h()},h(){$(s,"class","character-name svelte-bqys81"),$(f,"class","button-wrapper svelte-bqys81"),$(e,"class","dialog svelte-bqys81")},m(p,k){w(p,e,k),v(e,s),v(s,r),v(e,n),v(e,i),v(i,a),v(e,c),v(e,f),u&&u.m(f,null),d=!0},p(p,k){(!d||k&1)&&t!==(t=p[0].characterName+"")&&A(r,t),(!d||k&1)&&o!==(o=p[0].bodyText+"")&&A(a,o),p[0].nextButton?u?(u.p(p,k),k&1&&m(u,1)):(u=W(p),u.c(),m(u,1),u.m(f,null)):u&&(O(),g(u,1,1,()=>{u=null}),P())},i(p){d||(m(u),h||ee(()=>{h=te(e,me,{y:20,duration:400}),h.start()}),d=!0)},o(p){g(u),d=!1},d(p){p&&_(e),u&&u.d()}}}function ke(l){let e,s=l[0],t,r=X(l);return{c(){e=S("div"),r.c(),this.h()},l(n){e=b(n,"DIV",{class:!0});var i=y(e);r.l(i),i.forEach(_),this.h()},h(){$(e,"class","float-bottom-wrapper svelte-bqys81")},m(n,i){w(n,e,i),r.m(e,null),t=!0},p(n,[i]){i&1&&T(s,s=n[0])?(O(),g(r,1,1,V),P(),r=X(n),r.c(),m(r,1),r.m(e,null)):r.p(n,i)},i(n){t||(m(r),t=!0)},o(n){g(r),t=!1},d(n){n&&_(e),r.d(n)}}}function ve(l,e,s){let t,{dialogs:r}=e,{isValid:n}=e,{errorStep:i}=e,{successStep:o}=e,a=0;const c=()=>{var f,h;(h=(f=t.nextButton)==null?void 0:f.action)==null||h.call(f),a<r.length-1?(s(6,a=a+1),s(0,t=r[a])):a===r.length-1&&s(6,a=a+1)};return l.$$set=f=>{"dialogs"in f&&s(2,r=f.dialogs),"isValid"in f&&s(3,n=f.isValid),"errorStep"in f&&s(4,i=f.errorStep),"successStep"in f&&s(5,o=f.successStep)},l.$$.update=()=>{if(l.$$.dirty&4&&r.length===0)throw new Error("You must provide at least 1 dialog option");l.$$.dirty&4&&s(0,t=r[0]),l.$$.dirty&124&&a===r.length&&(s(0,t=n?o:i),re())},[t,c,r,n,i,o,a]}class Se extends G{constructor(e){super(),N(this,e,ve,ke,T,{dialogs:2,isValid:3,errorStep:4,successStep:5})}}function be(l){let e,s,t,r,n;const i=l[5].default,o=ne(i,l,l[4],null);return r=new Se({props:{dialogs:l[0],isValid:l[1],errorStep:l[2],successStep:l[3]}}),{c(){e=S("div"),s=S("div"),o&&o.c(),t=z(),I(r.$$.fragment),this.h()},l(a){e=b(a,"DIV",{class:!0});var c=y(e);s=b(c,"DIV",{class:!0});var f=y(s);o&&o.l(f),f.forEach(_),t=H(c),C(r.$$.fragment,c),c.forEach(_),this.h()},h(){$(s,"class","slide-content svelte-vqkhfv"),$(e,"class","wrapper svelte-vqkhfv")},m(a,c){w(a,e,c),v(e,s),o&&o.m(s,null),v(e,t),B(r,e,null),n=!0},p(a,[c]){o&&o.p&&(!n||c&16)&&le(o,i,a,a[4],n?ie(i,a[4],c,null):ae(a[4]),null);const f={};c&1&&(f.dialogs=a[0]),c&2&&(f.isValid=a[1]),c&4&&(f.errorStep=a[2]),c&8&&(f.successStep=a[3]),r.$set(f)},i(a){n||(m(o,a),m(r.$$.fragment,a),n=!0)},o(a){g(o,a),g(r.$$.fragment,a),n=!1},d(a){a&&_(e),o&&o.d(a),E(r)}}}function ye(l,e,s){let{$$slots:t={},$$scope:r}=e,{dialogs:n}=e,{isValid:i}=e,{errorStep:o}=e,{successStep:a}=e;return l.$$set=c=>{"dialogs"in c&&s(0,n=c.dialogs),"isValid"in c&&s(1,i=c.isValid),"errorStep"in c&&s(2,o=c.errorStep),"successStep"in c&&s(3,a=c.successStep),"$$scope"in c&&s(4,r=c.$$scope)},[n,i,o,a,r,t]}class se extends G{constructor(e){super(),N(this,e,ye,be,T,{dialogs:0,isValid:1,errorStep:2,successStep:3})}}const J=(l=0,e=100)=>{const s=e-l;let t=Math.random();return t=Math.floor(t*s),t=t+l,t};function Q(l,e,s){const t=l.slice();return t[4]=e[s],t[6]=s,t}function Z(l,e){let s,t,r,n,i,o;var a=e[0].itemComponent;function c(h){return{props:{picked:h[1].has(h[6])}}}a&&(t=new a(c(e)));function f(){return e[3](e[6])}return{key:l,first:null,c(){s=S("div"),t&&I(t.$$.fragment),r=z(),this.h()},l(h){s=b(h,"DIV",{class:!0,style:!0});var d=y(s);t&&C(t.$$.fragment,d),r=H(d),d.forEach(_),this.h()},h(){$(s,"class","item-wrapper svelte-qhv4q"),Y(s,"left",J(0,90)+"%"),Y(s,"top",J(0,100)+"%"),this.first=s},m(h,d){w(h,s,d),t&&B(t,s,null),v(s,r),n=!0,i||(o=ce(s,"click",f),i=!0)},p(h,d){e=h;const u={};if(d&3&&(u.picked=e[1].has(e[6])),a!==(a=e[0].itemComponent)){if(t){O();const p=t;g(p.$$.fragment,1,0,()=>{E(p,1)}),P()}a?(t=new a(c(e)),I(t.$$.fragment),m(t.$$.fragment,1),B(t,s,r)):t=null}else a&&t.$set(u)},i(h){n||(t&&m(t.$$.fragment,h),n=!0)},o(h){t&&g(t.$$.fragment,h),n=!1},d(h){h&&_(s),t&&E(t),i=!1,o()}}}function we(l){let e,s,t,r=l[1].size+"",n,i,o=[],a=new Map,c,f=Array(l[0].totalItems);const h=d=>d[6];for(let d=0;d<f.length;d+=1){let u=Q(l,f,d),p=h(u);a.set(p,o[d]=Z(p,u))}return{c(){e=S("div"),s=S("h2"),t=D("items picked: "),n=D(r),i=z();for(let d=0;d<o.length;d+=1)o[d].c();this.h()},l(d){e=b(d,"DIV",{class:!0});var u=y(e);s=b(u,"H2",{});var p=y(s);t=q(p,"items picked: "),n=q(p,r),p.forEach(_),i=H(u);for(let k=0;k<o.length;k+=1)o[k].l(u);u.forEach(_),this.h()},h(){$(e,"class","items-container svelte-qhv4q")},m(d,u){w(d,e,u),v(e,s),v(s,t),v(s,n),v(e,i);for(let p=0;p<o.length;p+=1)o[p].m(e,null);c=!0},p(d,u){(!c||u&2)&&r!==(r=d[1].size+"")&&A(n,r),u&7&&(f=Array(d[0].totalItems),O(),o=oe(o,u,h,1,d,f,a,e,ue,Z,null,Q),P())},i(d){if(!c){for(let u=0;u<f.length;u+=1)m(o[u]);c=!0}},o(d){for(let u=0;u<o.length;u+=1)g(o[u]);c=!1},d(d){d&&_(e);for(let u=0;u<o.length;u+=1)o[u].d()}}}function $e(l){let e,s;return e=new se({props:{dialogs:l[0].dialogs,errorStep:l[0].errorStep,successStep:l[0].successStep,isValid:l[1].size>=l[0].targetCount,$$slots:{default:[we]},$$scope:{ctx:l}}}),{c(){I(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,r){B(e,t,r),s=!0},p(t,[r]){const n={};r&1&&(n.dialogs=t[0].dialogs),r&1&&(n.errorStep=t[0].errorStep),r&1&&(n.successStep=t[0].successStep),r&3&&(n.isValid=t[1].size>=t[0].targetCount),r&131&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){s||(m(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){E(e,t)}}}function Ve(l,e,s){let{props:t}=e,r=new Set;const n=o=>{r.has(o)?r.delete(o):r.add(o),s(1,r)},i=o=>{n(o)};return l.$$set=o=>{"props"in o&&s(0,t=o.props)},l.$$.update=()=>{if(l.$$.dirty&1&&t.totalItems<t.targetCount)throw new Error("The target count must be less than the total items")},[t,r,n,i]}class Ie extends G{constructor(e){super(),N(this,e,Ve,$e,T,{props:0})}}function Be(l){let e,s;return{c(){e=S("div"),s=D("Unknown slide type")},l(t){e=b(t,"DIV",{});var r=y(e);s=q(r,"Unknown slide type"),r.forEach(_)},m(t,r){w(t,e,r),v(e,s)},p:V,i:V,o:V,d(t){t&&_(e)}}}function Ee(l){let e,s;const t=[l[0],{isValid:!0}];let r={$$slots:{default:[De]},$$scope:{ctx:l}};for(let n=0;n<t.length;n+=1)r=fe(r,t[n]);return e=new se({props:r}),{c(){I(e.$$.fragment)},l(n){C(e.$$.fragment,n)},m(n,i){B(e,n,i),s=!0},p(n,i){const o=i&1?de(t,[pe(n[0]),t[1]]):{};i&2&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){s||(m(e.$$.fragment,n),s=!0)},o(n){g(e.$$.fragment,n),s=!1},d(n){E(e,n)}}}function Te(l){let e,s;return e=new Ie({props:{props:l[0]}}),{c(){I(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,r){B(e,t,r),s=!0},p(t,r){const n={};r&1&&(n.props=t[0]),e.$set(n)},i(t){s||(m(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){E(e,t)}}}function De(l){let e,s;return{c(){e=S("h2"),s=D('TODO: implement "drag sides" slide type')},l(t){e=b(t,"H2",{});var r=y(e);s=q(r,'TODO: implement "drag sides" slide type'),r.forEach(_)},m(t,r){w(t,e,r),v(e,s)},p:V,d(t){t&&_(e)}}}function qe(l){let e,s,t,r;const n=[Te,Ee,Be],i=[];function o(a,c){return a[0].type==="pick-items"?0:a[0].type==="drag-sides"?1:2}return e=o(l),s=i[e]=n[e](l),{c(){s.c(),t=M()},l(a){s.l(a),t=M()},m(a,c){i[e].m(a,c),w(a,t,c),r=!0},p(a,[c]){let f=e;e=o(a),e===f?i[e].p(a,c):(O(),g(i[f],1,1,()=>{i[f]=null}),P(),s=i[e],s?s.p(a,c):(s=i[e]=n[e](a),s.c()),m(s,1),s.m(t.parentNode,t))},i(a){r||(m(s),r=!0)},o(a){g(s),r=!1},d(a){i[e].d(a),a&&_(t)}}}function Ce(l,e,s){let{props:t}=e;return l.$$set=r=>{"props"in r&&s(0,t=r.props)},[t]}class Ge extends G{constructor(e){super(),N(this,e,Ce,qe,T,{props:0})}}function x(l){let e,s,t,r,n;return s=new Ge({props:{props:{...l[0],successStep:l[1]}}}),{c(){e=S("div"),I(s.$$.fragment),this.h()},l(i){e=b(i,"DIV",{class:!0});var o=y(e);C(s.$$.fragment,o),o.forEach(_),this.h()},h(){$(e,"class","wrapper svelte-1h2qeuv")},m(i,o){w(i,e,o),B(s,e,null),n=!0},p(i,o){l=i;const a={};o&3&&(a.props={...l[0],successStep:l[1]}),s.$set(a)},i(i){n||(m(s.$$.fragment,i),ee(()=>{r&&r.end(1),t=te(e,F,{duration:U,delay:U}),t.start()}),n=!0)},o(i){g(s.$$.fragment,i),t&&t.invalidate(),r=_e(e,F,{duration:U}),n=!1},d(i){i&&_(e),E(s),i&&r&&r.end()}}}function Ne(l){let e=l[0],s,t,r=x(l);return{c(){r.c(),s=M()},l(n){r.l(n),s=M()},m(n,i){r.m(n,i),w(n,s,i),t=!0},p(n,[i]){i&1&&T(e,e=n[0])?(O(),g(r,1,1,V),P(),r=x(n),r.c(),m(r,1),r.m(s.parentNode,s)):r.p(n,i)},i(n){t||(m(r),t=!0)},o(n){g(r),t=!1},d(n){n&&_(s),r.d(n)}}}const U=500;function Oe(l,e,s){let t,r,{slides:n}=e,i=0;const o=()=>{i<n.length-1&&s(3,i=i+1)};return l.$$set=a=>{"slides"in a&&s(2,n=a.slides)},l.$$.update=()=>{if(l.$$.dirty&4&&n.length===0)throw new Error("You must provide at least 1 slide option");if(l.$$.dirty&12&&s(0,t=n[i]),l.$$.dirty&1&&s(1,r=t.successStep),l.$$.dirty&1){const a=t.successStep.nextButton;s(1,r={...t.successStep,nextButton:{text:(a==null?void 0:a.text)||"Ok",action:()=>{var c;(c=a==null?void 0:a.action)==null||c.call(a),o()}}})}},[t,r,n,i]}class Pe extends G{constructor(e){super(),N(this,e,Oe,Ne,T,{slides:2})}}function ze(l){let e,s;return{c(){e=S("p"),s=D("sugar cane"),this.h()},l(t){e=b(t,"P",{class:!0});var r=y(e);s=q(r,"sugar cane"),r.forEach(_),this.h()},h(){$(e,"class","wrapper svelte-1l6ndng"),j(e,"picked",l[0])},m(t,r){w(t,e,r),v(e,s)},p(t,[r]){r&1&&j(e,"picked",t[0])},i:V,o:V,d(t){t&&_(e)}}}function He(l,e,s){let{picked:t=!1}=e;return l.$$set=r=>{"picked"in r&&s(0,t=r.picked)},[t]}class Ae extends G{constructor(e){super(),N(this,e,He,ze,T,{picked:0})}}function Me(l){let e,s;return e=new Pe({props:{slides:[{type:"pick-items",dialogs:[{characterName:"Grandpa",bodyText:"First you need to pick some sugar cane",nextButton:{text:"How many do I pick?"}},{characterName:"Grandpa",bodyText:"Let's choose about 5 canes",nextButton:{text:"Ok I got it!"}}],errorStep:{characterName:"Grandpa",bodyText:"Keep going, we just need a few more!"},successStep:{characterName:"Grandpa",bodyText:"These look good. Let's bring them into the kitchen",nextButton:{text:"Sounds good"}},targetCount:5,totalItems:10,itemComponent:Ae},{type:"drag-sides",dialogs:[{characterName:"Grandpa",bodyText:"Now we need to peel the sugar cane with a knife",nextButton:{text:"Why do we need to do this?"}},{characterName:"Grandpa",bodyText:"The outside is tough and not nice to use",nextButton:{text:"Ok I got it!"}}],errorStep:{characterName:"Grandpa",bodyText:"Keep going, it is almost fully peeled"},successStep:{characterName:"Grandpa",bodyText:"The look great now, now we need to scrub it further to clean it.",nextButton:{text:"Sounds good"}}}]}}),{c(){I(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,r){B(e,t,r),s=!0},p:V,i(t){s||(m(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){E(e,t)}}}class Re extends G{constructor(e){super(),N(this,e,null,Me,T,{})}}export{Re as default};
